<p-toast></p-toast>
<p-confirmDialog #cd header="Confirmar" icon="pi pi-exclamation-triangle confirm">
  <p-footer>
    <button style="width: 48%; float: left;" pButton type="button" icon="pi pi-check" label="Si"
      class="ui-button-rounded ui-button-success" (click)="cd.accept()"></button>
    <button style="width: 48%; float: left; margin-left: 1%;" pButton type="button" icon="pi pi-times" label="No"
      class="ui-button-rounded ui-button-warning" (click)="cd.reject()"></button>
  </p-footer>
</p-confirmDialog>
<!-- Menú con Accordion -->
<div id="menu-info" *ngIf="view.ready">
  <p-accordion [expandIcon]="null" [collapseIcon]="null" (onOpen)="onAccordion(true)" (onClose)="onAccordion(false)">
    <p-accordionTab [selected]="true" [transitionOptions]="'200ms'">
      <p-header>
        <div title="Menú" class="logo-toggler" [ngClass]="{'display': visibleMenu}" id="menu">
        </div>
      </p-header>
      <div id="buttons">
        <button class="esri-button button1"
          style="background-color: #ffe73c; border-color: #ffe73c; border-radius: 4px;" title="Ver todo"
          (click)="home.go()">
          <i class="icofont-world" align="center"></i>
        </button>
        <button class="esri-button button2"
          style="background-color: #fbd129; border-color: #fbd129; border-radius: 4px;" title="Herramientas de Medición"
          (click)="openMeasuringTools()">
          <i class="icofont-ruler-compass" align="center"></i>
        </button>
        <button class="esri-button button3"
          style="background-color: #ec8c22; border-color: #ec8c22; border-radius: 4px;" title="Seleccionar"
          (click)="openSelectionTool()">
          <i class="icofont-hand-drag1" align="center"></i>
        </button>
        <button class="esri-button button4"
          style="background-color: #e36222; border-color: #e36222; border-radius: 4px;" title="Identificar"
          (click)="openEnabledPopup(!popupAutoOpenEnabled, true)">
          <i class="esri-icon-description" align="center"></i>
        </button>
        <button class="esri-button button5"
          style="background-color: #d73a2c; border-color: #d73a2c; border-radius: 4px;" title="Descargar capa"
          (click)="openExtract()">
          <i class="esri-icon-download" align="center"></i>
        </button>
      </div>
      <div id="layerSelected" class="layerSelected" title="Capa actual">
        <div *ngIf="view.ready">
          <i class="esri-icon-checkbox-unchecked" *ngIf="!currentLayerExist"></i>
          <i class="esri-icon-checkbox-checked" *ngIf="currentLayerExist"></i>
          <span *ngIf="currentLayerExist">{{currentLayer.title}}</span>
          <span *ngIf="!currentLayerExist">...</span>
        </div>
      </div>
      <div>
        <p-tieredMenu [style]="{'width': 'auto'}" id="content-menu" [model]="menu"></p-tieredMenu>
      </div>
    </p-accordionTab>
  </p-accordion>
</div>
<!-- Finaliza menú con Accordion -->


<!-- Div de carga de tareas -->
<div id="loading" *ngIf="(view.updating || makingWork) && !modalMeasurement && !flagSketch">
  <div class="loading-machin">
  </div>
  <p-progressBar mode="indeterminate" [style]="{'height': '6px', 'margin-top': '56px', 'margin-left': '-72px'}">
  </p-progressBar>
</div>
<!-- Fin de div de carga de tareas -->

<!-- Div contenedor del mapa -->
<div id="map" #mapViewNode></div>
<!-- Fin del div contenedor del mapa -->

<!-- Modal de extracción de datos -->
<p-dialog [(visible)]="modalExtract" [resizable]="false" (onHide)="onHideDialogExtract()" [focusOnShow]="false"
  [style]="{'width': '450px'}" position="topright">
  <p-header>
    {{headerExtract}}
  </p-header>
  <div id="infoDiv" *ngIf="modalExtract">
    <button pButton class="ui-button-rounded ui-button-secondary" title="Ayuda" style="color: #007ad8; float: right;"
      (click)="requestHelp('h-extraer')" icon="pi pi-question"></button>
    <button pButton class="ui-button-rounded ui-button-secondary" title="Info" (click)="infoTool = !infoTool"
      style="color: #007ad8; float: right; margin-right: 5px; box-shadow: none;" icon="pi pi-info"></button>
    <p>1. Seleccione la(s) capa(s) a extraer, posteriormente de click en el ícono de cerrar del Select</p>
    <p-multiSelect [options]="optionsLayers" defaultLabel="Click aquí..." selectedItemsLabel="{0} items seleccionados"
      [(ngModel)]="selectedLayers"></p-multiSelect>
    <br>
    <div *ngIf="!layerExtract">
      <p>2. Seleccione el parámetro para establecer su área de interés</p>
      <div style="display: grid; grid-template-columns: auto auto;">
        <p-dropdown [options]="optionsPolygon" optionLabel="name" placeholder="Selección en la capa actual"
          (onChange)="onChangeSelect()" [(ngModel)]="selectedPolygon"></p-dropdown>
        <p-button label="Limpiar área" class="clearGraphics" [disabled]="!clearGraphic" (onClick)="clearGraphics()">
        </p-button>
      </div>
    </div>
    <div *ngIf="selectedPolygon != undefined && selectedPolygon != null && selectedPolygon.value == 'entity'">
      <p>3. Seleccione la capa a la cual pertenece el Elemento Geográfico (o “molde de corte”)</p>
      <p-dropdown [options]="optionsLayerExtractor" placeholder="Click aquí..." [(ngModel)]="layerExtractor">
      </p-dropdown>
    </div>
    <div *ngIf="selectedPolygon != undefined && selectedPolygon != null">
      <span *ngIf="selectedPolygon.value == 'entity' && layerExtractor != undefined">
        4. Haga click en el mapa sobre el Elemento Geográfico (o “molde de corte”)
      </span>
      <span *ngIf="selectedPolygon.value != 'entity'">
        3. Dibuje el polígono en el mapa
      </span>
    </div>
    <p-button label="Extraer" icon="pi pi-download" (onClick)="extractShape()" [style]="{'margin-top': '5px'}">
    </p-button>
  </div>
  <p-message [escape]="false" id="infoMedicion" *ngIf="!layerExtract && infoTool" severity="info"
    text="Proceda <b>seleccionando</b> las capas que desea extraer.<br>Defina el <b>área de interés</b> para hacer el corte.<br>Si su área de interés es una <b>entidad</b>, seleccione la entidad de corte para su extracción.">
  </p-message>
  <p-message [escape]="false" id="infoMedicion" *ngIf="layerExtract && infoTool" severity="info"
    text="<b>Seleccione las capas</b> que se incluirán en la extracción">
  </p-message>
  <br>
  <p-message [escape]="false" id="infoMedicion" severity="info" *ngIf="infoTool"
    text="Fuentes de información: <br><b>*Servicio Geológico Colombiano - SGC:</b> {{copyrightSGC}} <br><b>**Instituto Geográfico Agustín Codazzi - IGAC:</b> {{copyrightIGAC}}">
  </p-message>
</p-dialog>
<!-- Fin del modal de extracción de datos -->

<!-- Modal de análisis de departamento -->
<p-dialog header="Análisis de Departamento" [(visible)]="modalAnalysis" [resizable]="false"
  (onHide)="onHideDialogAnalisis()" [focusOnShow]="false" [style]="{'width': '390px'}" position="topright">
  <div *ngIf="modalAnalysis">
    <app-dialog-analysis [_this]="this"></app-dialog-analysis>
  </div>
</p-dialog>
<!-- Fin del modal de análisis de cobertura -->

<!-- Modal de zona de influencia -->
<p-dialog header="Zona de Influencia (Buffer)" [(visible)]="modalBuffer" [resizable]="false" position="topright"
  (onHide)="onHideDialogBuffer()" [style]="{'width': '400px'}" [focusOnShow]="false">
  <div *ngIf="modalBuffer">
    <button pButton class="ui-button-rounded ui-button-secondary" title="Ayuda" style="color: #007ad8; float: right;"
      (click)="requestHelp('h-buffer')" icon="pi pi-question"></button>
    <button pButton class="ui-button-rounded ui-button-secondary" title="Info" (click)="infoTool = !infoTool"
      style="color: #007ad8; float: right; margin-right: 5px; box-shadow: none;" icon="pi pi-info"></button>
    <p>1. Defina la anchura deseada</p>
    <div style="display: grid; grid-template-columns: auto auto;">
      <input id="input" type="text" size="10" pInputText [(ngModel)]="bufDistance" placeholder="Ingrese un número"
        title="Ingrese un número">
      <p-dropdown [options]="optionsBuffer" optionLabel="name" [(ngModel)]="selectedBuffer">
      </p-dropdown>
    </div>
    <p>2. Dibuje la geometría para la Zona de Influencia</p>
    <div style="display: grid; grid-template-columns: auto auto;">
      <p-selectButton [options]="modesBuffer" [(ngModel)]="selectedSketch" (onChange)="onChangeSelectedSketchBuffer()">
      </p-selectButton>
      <div align="right">
        <p-button label="Limpiar" class="clearGraphics" [disabled]="!clearGraphic" (onClick)="clearGraphics()">
        </p-button>
      </div>
    </div>
    <p>3. Seleccione las capas a extraer</p>
    <div style="display: grid; grid-template-columns: auto auto; margin-bottom: 5px; margin-right: 5px;">
      <p-multiSelect [options]="optionsLayers" defaultLabel="Click aquí..." selectedItemsLabel="{0} items seleccionados"
        [(ngModel)]="selectedLayers"></p-multiSelect>
      <div align="right">
        <p-button label="Extraer" icon="pi pi-download" (onClick)="extractShape()">
        </p-button>
      </div>
    </div>
    <p-message *ngIf="infoTool" [escape]="false" id="infoMedicion" severity="info" text="La <b>anchura del área de influencia (buffer)</b> se mide apartir del
    contorno de la geometría. Cuando se usa un punto, la anchura equivale al <b>radio</b> del círculo resultante.
    Para dibujar un punto haga <b>clic</b> en el mapa. Para las demás herramientas haga <b>clic</b> y sostenga mientras mueve
    el mouse y suelte para finalizar."></p-message>
    <br>
    <p-message *ngIf="infoTool" [escape]="false" id="infoMedicion" severity="info"
      text="Fuentes de información: <br><b>*Servicio Geológico Colombiano - SGC:</b> {{copyrightSGC}} <br><b>**Instituto Geográfico Agustín Codazzi - IGAC:</b> {{copyrightIGAC}}">
    </p-message>
  </div>
</p-dialog>
<!-- Fin del modal de zona de influencia -->

<!-- Modal de herramientas de medicion -->
<p-dialog header="Herramientas de Medición" [(visible)]="modalMeasurement" [resizable]="false"
  (onHide)="onHideDialogMedicion()" [focusOnShow]="false" position="topright">
  <div *ngIf="modalMeasurement">
    <app-dialog-measurement [_this]="this"></app-dialog-measurement>
  </div>
</p-dialog>
<!-- Fin del modal de herramientas de medición -->

<!-- Modal de tabla de atributos -->
<p-dialog id="attr-table" [(visible)]="modalTable" [resizable]="false" [draggable]="false" [closable]="false"
  styleClass="{{styleClassAttrTable}}" (onHide)="onHideDialogAtributos()" position="bottomright" [focusOnShow]="false"
  [showHeader]="true">
  <p-header>
    <span>Tabla de Atributos</span>
    <i class="pi pi-window-minimize" style="margin-left: 635px; padding-top: 2px; cursor: pointer;"
      (click)="minimizeMaximizeAttrTable(false)" *ngIf="minimizeMaximize" title="Minimizar"></i>
    <i class="pi pi-window-maximize" style="margin-left: 73px; padding-top: 2px; cursor: pointer;"
      (click)="minimizeMaximizeAttrTable(true)" *ngIf="!minimizeMaximize" title="Maximizar"></i>
    <i class="pi pi-times" style="cursor: pointer;" (click)="closeDialogAttr()" title="Cerrar"></i>
  </p-header>
  <div *ngIf="modalTable">
    <p-table class="esri-widget__table" [style]="{'width': 'inherit', 'height': 'inherit', 'max-height': '380px'}"
      [paginator]="true" [rows]="100" [rowsPerPageOptions]="[100,200,500]" selectionMode="multiple" #dt
      [columns]="columnsTable" *ngIf="modalTable && minimizeMaximize" [dataKey]="dataKey()" [value]="featureDptos"
      [scrollable]="true" [(selection)]="featuresSelected" (onRowSelect)="onRowSelect($event)"
      (onRowUnselect)="onRowUnselect($event)" scrollHeight="228px" [resizableColumns]="true"
      [showCurrentPageReport]="true" currentPageReportTemplate="Mostrando {first} - {last} de {totalRecords}"
      (onHeaderCheckboxToggle)="onHeaderCheckboxToggle($event)">
      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <!-- <col style="width: 3em !important;"> -->
          <col style="width: 28px !important;">
          <col style="width: 28px !important;" *ngIf="supportsAttachment">
          <ng-container *ngIf="columns.length > 2">
            <col *ngFor="let col of columns" style="width:150px">
          </ng-container>
          <ng-container *ngIf="columns.length <= 2">
            <col *ngFor="let col of columns">
          </ng-container>
        </colgroup>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <!-- <th style="width: 3em">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th> -->
          <th></th>
          <th *ngIf="supportsAttachment"></th>
          <th *ngFor="let col of columns" pResizableColumn [pSortableColumn]="keySort(col.name)">
            {{col.alias}}
            <p-sortIcon [field]="keySort(col.name)"></p-sortIcon>
          </th>
        </tr>
        <tr>
          <!-- <th></th> -->
          <th></th>
          <th *ngIf="supportsAttachment"></th>
          <th *ngFor="let col of columns; let i = index">
            <span style="display: grid; grid-template-columns: 20% 80%;" class="filter">
              <select name="select" *ngIf="view.ready" class="esri-select" [(ngModel)]="filter[i]">
                <option value="contains" selected>contiene</option>
                <option value="startsWith">empiece por</option>
                <option value="endsWith">termina por</option>
                <option value="equals">igual</option>
                <option value="notEquals">no igual a</option>
                <option *ngIf="col.type !== 'string'" value="lt">menor que</option>
                <option *ngIf="col.type !== 'string'" value="lte">menor o igual que</option>
                <option *ngIf="col.type !== 'string'" value="gt">mayor que</option>
                <option *ngIf="col.type !== 'string'" value="gte">mayor o igual que</option>
              </select>
              <input class="esri-input" type="text"
                (input)="dt.filter($event.target.value, keySort(col.name), filter[i])">
            </span>
          </th>
        </tr>
        <tr style="background: transparent;">
          <td style="padding: 0px; " [attr.colspan]="this.columnsTable.length + 2">
            <p-progressBar mode="indeterminate" *ngIf="makingWork" [style]="{'height': '6px'}"></p-progressBar>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-columns="columns">
        <tr [pSelectableRow]="item">
          <!-- <td>
            <p-tableCheckbox [value]="item"></p-tableCheckbox>
          </td> -->
          <td style="padding: 0px; width: 28px !important;" title="Acerca a">
            <button class="esri-button" (click)="onRowSelectGoTo(item)">
              <i class="esri-icon-zoom-in-magnifying-glass"></i>
            </button>
          </td>
          <td style="padding: 0px; width: 28px !important;" title="Minuta contrato" *ngIf="supportsAttachment">
            <button class="esri-button" (click)="downloadAttachment(item)">
              <i class="esri-icon-documentation"></i>
            </button>
          </td>
          <td *ngFor="let col of columns" height="28px" title="{{item.attributes[col.name]}}">
            {{item.attributes[col.name]}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="summary">
        <div style="display: grid; grid-template-columns: auto auto;">
          <div style="text-align: left; font-size: larger;">
            {{layerAttrTable.title}}
          </div>
          <div>
            <button pButton icon="pi pi-search" class="ui-button-rounded ui-button-secodnary"
              pTooltip="Buscar información" (click)="openFilter()"></button>
            <button pButton icon="esri-icon-download" class="ui-button-rounded ui-button-warning"
              pTooltip="Exportar a Shapefile" (click)="extractShapeFromAttr()"></button>
            <button pButton icon="fas fa-file-excel" class="ui-button-rounded ui-button-success"
              pTooltip="Exportar a Excel" (click)="generateExcelFeaturesLayer()"></button>
          </div>
        </div>
      </ng-template>
    </p-table>
  </div>
</p-dialog>
<!-- Modal Búsqueda avanzada -->
<p-dialog header="Búsqueda" [(visible)]="modalFilter" [style]="{width: '558px'}" (onHide)="hideAdvancedSearch($event)"
  [baseZIndex]=20 [resizable]="false" [draggable]="true" [focusOnShow]="false" position="topright">
  <div *ngIf="modalFilter" class="advancedSearch" style="max-height: 250px; overflow-y: scroll;">
    <p-progressBar mode="indeterminate" *ngIf="makingSearch" [style]="{'height': '6px'}">
    </p-progressBar>
    <button pButton icon="pi pi-plus" class="ui-button-success" label="Añadir Criterio"
      (click)="addFormField()"></button>
    <div *ngIf="quantityFields === 0">
      <p>Añade un criterio para realizar una búsqueda.</p>
    </div>
    <div id="contentField">
      <div *ngFor="let i of arrQuantity(quantityFields).fill(1); let p = index" style="margin-top: 10px; clear: both;">
        <select name="selectField" style="width: 170px; float: left; margin-top: 3px;" class="esri-select"
          [(ngModel)]="objectFilter[p]">
          <option *ngFor="let item of columnsTable; let i = index" [ngValue]="item.name">
            {{item.alias}}</option>
        </select>
        <select name="selectType" style="width: 150px; float: left; margin-left: 5px; margin-top: 3px;"
          *ngIf="view.ready" [(ngModel)]="filterS[p]" class="esri-select">
          <option value='' disabled>Seleccione un matcher</option>
          <option *ngIf="objectFilter[p] !== undefined" value="contains">contiene</option>
          <option *ngIf="objectFilter[p] !== undefined" value="startsWith">empiece por</option>
          <option *ngIf="objectFilter[p] !== undefined" value="endsWith">termina por</option>
          <option value="equals">igual</option>
          <option value="notEquals">no igual a</option>
          <option *ngIf="objectFilter[p] !== undefined && getTypeObject(objectFilter[p]) !== 'string'" value="lt">
            menor que </option>
          <option *ngIf="objectFilter[p] !== undefined && getTypeObject(objectFilter[p]) !== 'string'" value="lte">
            menor o igual que</option>
          <option *ngIf="objectFilter[p] !== undefined && getTypeObject(objectFilter[p]) !== 'string'" value="gt">
            mayor que </option>
          <option *ngIf="objectFilter[p] !== undefined && getTypeObject(objectFilter[p]) !== 'string'" value="gte">
            mayor o igual que</option>
        </select>
        <input class="esri-input" [(ngModel)]="values[p]" type="text"
          style="width: 110px; float: left; margin-left: 5px; margin-top: 3px;">
        <select name="selectOpe" style="width: 50px; float: left; margin-left: 5px; margin-top: 3px;" *ngIf="view.ready"
          [(ngModel)]="logicalOperators[p]" class="esri-select">
          <option value="AND" selected>Y</option>
          <option value="OR">O</option>
        </select>
        <button pButton type="button" icon="pi pi-times" style="margin-left: 5px;"
          class="ui-button-rounded ui-button-danger" (click)="removeFormField(p)"></button>
      </div>
    </div>
    <div style="display: grid; grid-template-columns: 50% 50%; margin-top: 10px;" *ngIf="quantityFields > 0">
      <div>
        <button pButton icon="pi pi-times" class="ui-button-warning" label="Limpiar Filtros"
          (click)="cleanFilters()"></button>
      </div>
      <div align="right">
        <button pButton [disabled]="quantityFields === 0" icon="pi pi-filter" label="Filtrar"
          (click)="getFilterParams()"></button>
      </div>
    </div>
  </div>
</p-dialog>
<!-- Fin del modal de búsqueda avanzada -->
<!-- Fin del modal de tabla de atributos -->

<!-- Div contenedor del widget de ayuda -->
<div id="help" class="esri-widget">
  <div *ngIf="view.ready">
    <div class="title-help">
      <div class="icon">
        <i class="pi pi-comment" style="font-size: 2em"></i>
      </div>
      <div class="title-text">
        <h4>Bienvenido al Geovisor ANH</h4>
      </div>
    </div>
    <div class="body-help">
      Puedes <b>hacer clic</b> sobre los elementos de tu interés en el mapa o ... <ul>
        <li> <b>Encuentra arriba</b> lo que buscas.</li>
        <li> <b>Usa las herramientas</b> del menú de arriba a la izquierda.</li>
        <li> Selecciona a la derecha <b>la capa de trabajo</b>, controla <b>transparencia</b> y ve las <b>convenciones
            del mapa</b> y <b>atributos de los elementos</b> seleccionados.</li>
      </ul>
    </div>
    <div align="center" class="p-grid p-dir-col">
      <div class="p-col" style="margin: 0 auto;">
        <button pButton type="button" label="Abrir Guía del Usuario" class="ui-button-raised" icon="fa fa-book-open"
          (click)="onShowGuide()"></button>
        <button pButton type="button" label="Acerca de Geovisor ANH" class="ui-button-raised ui-button-secondary"
          icon="pi pi-info-circle" (click)="onShowAbout()"></button>
      </div>
    </div>
  </div>
</div>
<!-- Fin del div contenedor del widget de ayuda -->

<!-- Modal de acerca de -->
<p-dialog header="Acerca de..." [(visible)]="modalAbout" [resizable]="false" [focusOnShow]="false">
  <div *ngIf="modalAbout">
    <app-dialog-about></app-dialog-about>
  </div>
</p-dialog>
<!-- Fin del modal de acerca de -->

<!-- Modal de ayuda -->
<p-dialog header="Ayuda del Geovisor ANH v3" [(visible)]="modalGuide" [resizable]="false" [style]="{'width': '815px'}"
  [focusOnShow]="false">
  <div *ngIf="modalGuide">
    <app-dialog-guide [flag]="modalGuide" [elementId]="sectionSelected"></app-dialog-guide>
  </div>
</p-dialog>
<!-- Fin del modal de ayuda -->

<!-- Modal Herramientas de selección -->
<p-dialog header="Herramientas de Selección" [(visible)]="modalSelection" [resizable]="false"
  (onHide)="onHideDialogSelection()" [focusOnShow]="false" [style]="{'width': '400px'}" position="topright">
  <div *ngIf="modalSelection">
    <button pButton class="ui-button-rounded ui-button-secondary" title="Ayuda" style="color: #007ad8; float: right;"
      (click)="requestHelp('h-seleccion')" icon="pi pi-question"></button>
    <button pButton class="ui-button-rounded ui-button-secondary" title="Info" (click)="infoTool = !infoTool"
      style="color: #007ad8; float: right; margin-right: 5px; box-shadow: none;" icon="pi pi-info"></button>
    <div style="margin-bottom: 5px;">
      <div>
        <label>Capa de Selección:</label>
        <p-dropdown (ngModelChange)="changeLayer($event)" [options]="optionsLayers" [(ngModel)]="layerSelectedSelection"
          placeholder="Seleccione una capa">
        </p-dropdown>
      </div>
      <div style="display: grid; grid-template-columns: auto auto; margin-top: 5px;">
        <p-selectButton [options]="modesBuffer" [(ngModel)]="selectedSketch"
          (onChange)="onChangeSelectedSketchSelection()">
        </p-selectButton>
        <p-button label="Limpiar" class="clearGraphics" [disabled]="!clearGraphic" (onClick)="clearGraphics()">
        </p-button>
      </div>
    </div>
    <p-message [escape]="false" id="infoMedicion" severity="info" *ngIf="infoTool" text="La selección aplica a la capa selecccionada. Para la selección con un punto <b>clic</b> en el mapa.
        Para las demás herramientas haga <b>clic</b> y sostenga mientras mueve el mouse, y suelte para finalizar.">
    </p-message>
    <br>
    <p-message [escape]="false" id="infoMedicion" severity="info" *ngIf="infoTool"
      text="Fuentes de información: <br><b>*Servicio Geológico Colombiano - SGC:</b> {{copyrightSGC}} <br><b>**Instituto Geográfico Agustín Codazzi - IGAC:</b> {{copyrightIGAC}}">
    </p-message>
  </div>
</p-dialog>
<!-- Fin de modal herramientas de selección -->

<!-- Componente ubicar coordenada -->
<p-dialog header="Ubicar coordenada" [(visible)]="modalCoordinate" [resizable]="false" [focusOnShow]="false"
  [style]="{'width': '411px'}" (onHide)="onHideDialogCoordinate()" position="topright">
  <div *ngIf="modalCoordinate">
    <app-dialog-ubicate-coordinate [_this]="this"></app-dialog-ubicate-coordinate>
  </div>
</p-dialog>

<!-- Componente coordenadas -->
<div id="coordsWidget" class="esri-widget esri-component" style="padding: 7px 7px 5px;">
  <div style="display: grid; grid-template-columns: auto auto;">
    <select name="select" *ngIf="view.ready" class="esri-select" [(ngModel)]="coordsModel">
      <option value="G" selected>Coordenadas Geográficas</option>
      <option value="P">Coordenadas Planas Magna Origen Central</option>
    </select>
    <br>
    <div id="coords" style="margin-top: 1.5px;"></div>
  </div>
</div>
<!-- Fin componente coordenadas -->

<!-- Tierra Slider del mapa -->
<div id="time-slider" class="esri-widget esri-component" *ngIf="!errorArcgisService" align="center">
  <div class="ts-bg">
    <div id="ts-tierras" class="ui-slider-orange">
      <div class="ts-label">{{nameLayer}}</div>
    </div>
  </div>
</div>
<!-- Fin del tierra slider del mapa -->

<!-- Componente Limpieza profunda -->
<p-dialog header="Limpiar" [(visible)]="modalClear" [resizable]="false" position="topright">
  <div *ngIf="modalClear" style="max-width: 500px;">
    <app-dialog-clear [_this]="this"></app-dialog-clear>
  </div>
</p-dialog>
<!-- Fin componente -->
